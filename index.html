<!DOCTYPE html>
<html>
    <head>
        <title>Hello HTML</title>
        <script src="https://unpkg.com/d3@7.9.0/dist/d3.min.js"></script>
        <style>
            pre {
                font-size: 7em;
            }
        </style>
    </head>
    <body>
        <pre id="message container"></pre>
        <script>
            //This is the formal way to create the promise function?
            //const promise = fetch(url);
            //promise.then(respone => {})

            //This is short way of fetching a url and displaying the text.
            //This method creates the "Pyramid of Doom"
            // fetch(url).then(response => {
            //     response.text().then(text => {
            //         console.log(text);
            //     });
                
            // });

            //Using Async and await to escape the "Pyramid of Doom"
            

            const csvUrl = 'https://gist.githubusercontent.com/leaflore/ae12e6178a767dc2d02f7a81ccd5cd4e/raw/BK-cssNamedColors.csv';
            d3.csv(csvUrl).then(data => {
                let message = '';
                message = message + Math.round(d3.csvFormat(data).length / 10124) + 'kB\n';
                message = message + data.length + 'rows\n';
                message = message + data.columns.length + 'columns';
                document.getElementById('message container').textContent = message;
            });

            const fetchText = async (url) => {
                    const response = await fetch(url);
                    return await response.text();
                    
            };
            
            //Before is what you would do fetch, async, and await.
            

        </script>
    </body>
</html>